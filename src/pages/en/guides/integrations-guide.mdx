---
layout: ~/layouts/MainLayout.astro
title: Using Integrations
i18nReady: true
---
import IntegrationsNav from '~/components/IntegrationsNav.astro';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import FileTree from '~/components/FileTree.astro'

**Astro Integrations** add new functionality and behaviors for your project with only a few lines of code. You can write a custom integration yourself, use an official integration, or use integrations built by the community.

Integrations can…

- Unlock React, Vue, Svelte, Solid, and other popular UI frameworks.
- Integrate tools like Tailwind, and Partytown with a few lines of code.
- Add new features to your project, like automatic sitemap generation.
- Write custom code that hooks into the build process, dev server, and more.

## Official Integrations

<IntegrationsNav />

## Automatic Integration Setup

Astro includes an `astro add` command to automate the setup of integrations.

:::caution
We will always ask for confirmation before updating any of your files, but it never hurts to have a version-controlled backup just in case.
:::

Run the `astro add` command using the package manager of your choice and our automatic integration wizard will update your configuration file and install any necessary dependencies.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npx astro add react
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpx astro add react
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn astro add react
  ```
  </Fragment>
</PackageManagerTabs>

It's even possible to configure multiple integrations at the same time!

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npx astro add react tailwind partytown
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpx astro add react tailwind partytown
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn astro add react tailwind partytown
  ```
  </Fragment>
</PackageManagerTabs>

:::note[Handling Integration Dependencies]
If you see any warnings like `Cannot find package '[package-name]'` after adding an integration, your package manager may not have installed [peer dependencies](https://nodejs.org/en/blog/npm/peer-dependencies/) for you. To install these missing packages, run `npm install [package-name]`.
:::

## Using Integrations

Astro integrations are always added through the `integrations` property in your  `astro.config.mjs` file.

There are three common ways to import an integration into your Astro project:
1. Installing an npm package integration.
2. Import your own integration from a local file inside your project.
3. Write your integration inline, directly in your config file.

```js
// astro.config.mjs
import {defineConfig} from 'astro/config';
import installedIntegration from '@astrojs/vue';
import localIntegration from './my-integration.js';

export default defineConfig({
  integrations: [
    // 1. Imported from an installed npm package
    installedIntegration(),
    // 2. Imported from a local JS file
    localIntegration(),
    // 3. An inline object
    {name: 'namespace:id', hooks: { /* ... */ }},
  ]
})
```

Check out the [Integration API](/en/reference/integrations-reference/) reference to learn all of the different ways that you can write an integration.

### Custom Options

Integrations are almost always authored as factory functions that return the actual integration object. This lets you pass arguments and options to the factory function that customize the integration for your project.

```js
integrations: [
  // Example: Customize your integration with function arguments
  sitemap({filter: true})
]
```

### Toggle an Integration

Falsy integrations are ignored, so you can toggle integrations on & off without worrying about left-behind `undefined` and boolean values.

```js
integrations: [
  // Example: Skip building a sitemap on Windows
  process.platform !== 'win32' && sitemap()
]
```

## Finding More Integrations

You can find many integrations developed by the community in the [Astro Integrations Directory](https://astro.build/integrations/). Follow links there for detailed usage and configuration instructions.

## Building Your Own Integration

Astro's Integration API is inspired by Rollup and Vite, and designed to feel familiar to anyone who has ever written a Rollup or Vite plugin before.

In this example, we'll create a simple integration to get fimiliar with the API.

### Project Setup

We'll start by creating a `integration.ts` file under an `lib` directory. This file would hold all of the code for our integration.

<FileTree title="Project Structure">
- src/
  - **lib/**
    - **integration.ts**
- astro.config.mjs
- package.json
</FileTree>

### Importing Types

Since we're using TypeScript for our example we'll start out by importing Astro's built in type for integrations.

```ts title="/src/lib/integration.ts"
import type { AstroIntegration, AstroConfig } from 'astro';
```

[`AstroIntegration`](/en/reference/integrations-reference/#quick-api-reference) acts as a reference for you to build your own integration.

### Writing Our Integration

To make our integration work, you would have to export a function that the user can call from their `astro.config,mjs` file.

This function returns a `AstroIntegration` type.

```ts title="/src/lib/integration.ts"

export default function int_test(options: testOptions): AstroIntegration {
  name: 'awesome-intigration',
}

```

### Using Hooks

Astro comes with a bunch of [hooks](/en/reference/integrations-reference/#hooks) that you can use during the lifecycle of the website. These hooks allow you to fire certain functions when an event starts. Hooks come with a bunch of parameters that you can use in their callback functions.

In your `integration.ts` file, you can call these hooks can run various functions.

```ts title="/src/lib/integration.ts"

export default function int_test(): AstroIntegration {
  name: 'awesome-intigration',
  hooks: {
    'astro:config:setup': () => {},
    'astro:config:done': () => {},
    'astro:server:setup': () => {}
    /* You can read about the rest of the hooks at https://docs.astro.build/en/reference/integrations-reference/#hooks  */
  }
}


```
`astro:config:setup` runs when the `dev` or `build` server is started. You can use this hook to inject routes, make changes to the config or read data given to us by the user.

Let's add a quick and dirty callback function to our first hook.

```ts title="/src/lib/integration.ts"

hooks: {
    'astro:config:setup': ({command}) => {
      console.log(`astro:config:setup> running command: ${command}`);   
    },
}

```

`command` returns what command is being run. It can be either `build` or `dev`.

### Running Our Integration

To run your integration, first, you would need to import it on your `astro.config.mjs` file.

```js title="astro.config.mjs" {2, 4}

import { defineConfig } from 'astro/config';
import awesome from './src/lib/integration';

export default defineConfig({
    integrations: [awesome()],
});

```

Now, if your run your site using the `dev` command you should see the following on your terminal screen.

```
astro:config:setup> running command: dev
```

### Extending The Integration

In order to make your integration really come to life, you might want to add a few features. In the examples below, we walk you through on how to set up user config and injecting routes.

#### User Config

Now that you have a working integration, one thing you might want to do is to add a way for the users to configure various data. For example the config in [TailWind](/en/guides/integrations-guide/tailwind/#configuration) integration.

You can do so by first creating a type.

:::note
Creating a type is optional, however recommended so that the users can get IntelliSense for when they use your integration.
:::

```ts title="/src/lib/integration.ts"

type AwesomeType = {
  name: string
}

```

Now, you can pass a parameter to your function with this type.

```ts title="/src/lib/integration.ts" /options: AwesomeType/

export default function int_test(options: AwesomeType): AstroIntegration { /* Code is poetry */ }

```

Great! Now you can pass a value to our function in our ```astro.config.mjs``` file.

```js title="astro.config.mjs" {6}

import { defineConfig } from 'astro/config';
import awesome from './src/lib/integration';

export default defineConfig({
    integrations: [awesome(
      name: "Neel"
    )],
});

```

At this point in time, you can use the `options` parameter in your hooks.

```ts title="/src/lib/integration.ts"

hooks: {
    'astro:config:setup': ({command}) => {
      console.log(`astro:config:setup> running command: ${command}`); 
      console.log(`Hello there, ${options.name}!`);
    },
}

```
Restarting the server would print this to the console.

```
astro:config:setup> running command: dev
Hello there, Neel!
```

#### Injecting Routes

As started before, you can inject custom routes to the a user's site. This is particularly useful when you want your integration to have some sort of dashboard.

To add inject a route, you would first have to create an `.astro` file in your `lib` directory.

<FileTree title="Project Structure">
- src/
  - lib/
    - integration.ts
    - **Inject.astro**
- astro.config.mjs
- package.json
</FileTree>

```astro title="/src/lib/Inject.astro"

<h1>I've been injected!</h1>

```

Route injections happen in the `astro:config:setup` hook.

In order to inject a route, we'll have to pass the `injectRoute` parameter to our `astro:config:setup` callback function.

```ts title="/src/lib/integration.ts" /injectRoute/

hooks: {
    'astro:config:setup': ({command, injectRoute}) => {
      /* Code is poetry */
    },
}

```

Now, we can use the `injectRoute()` method to inject a route.

```ts

hooks: {
    'astro:config:setup': ({command, injectRoute}) => {
      
      console.log(`astro:config:setup> running command: ${command}`); 
      console.log(`Hello there, ${options.name}!`);

      injectRoute({
        pattern: '/injected',
        entryPoint: '/src/lib/Inject.astro',
      });

   },
}

```

The `pattern` property is the route that you need injected and the `entryPoint` property is the path to your `.astro` file that you want to render.

Now, if you restart the server and try to visit the `/injected` path you shoud see your `.astro` file rendered!

### Going Forward

Check out the [Integration API](/en/reference/integrations-reference/) reference to learn more about the integrations API to extend your integration.

### Publishing to npm

If you would like to publish your integration to NPM, you can check out [our guide](/en/reference/publish-to-npm/) on the topic.

